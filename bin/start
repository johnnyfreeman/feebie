#!/usr/bin/env coffee

# get servers
server = require '../dist/server'
api = server.api
app = server.app

# remove command from arguments
args = process.argv
args.shift()
args.shift()

# add path to server
args.push './dist/server/index.js'

server = require('child_process').spawn 'node', args

server.stdout.on 'data', (data) ->
  console.log 'stdout: ' + data

server.stderr.on 'data', (data) ->
  console.log 'stderr: ' + data

server.on 'close', (code) ->
  console.log 'child process exited with code ' + code